<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>calendar</title>
	<style>
	.calRow {
		display: -webkit-box;
		display: box;
		-webkit-box-orient: horizontal;
	}
	.calRow>div, .calRow>p, .calRow>li, .calRow>input {
		-webkit-box-flex: 1.0;
		box-flex: 1.0;
		width: 20%;
	}
	.myCalendar {
		width: auto;
		/*border: 1px solid black;*/
	}
	div {
		text-align: center;
	}
	.calHeader {
		position: relative;
		height: 18px;
	}
	.lastYear,.nextYear,.lastMonth,.nextMonth {
		position: relative;
		text-align: center;
	}
	.lastYear {
		/*left: 10%;*/
		width: 10%;
	}
	.nextYear {
		/*right: 10%;*/
		width: 20%;
	}
	.lastMonth {
		/*left: 20%;*/
		width: 10%;
	}
	.nextMonth {
		/*right: 20%;*/
		width: 20%;
	}
	div .year,div .month {
		width: 30%;
	}
	.myFirstCal {
		border: 1px solid #ccc;
		font-size: 11pt;
	}
	.myFirstCal:nth-child(1) {
		/*background: green;*/
		border: 1px solid #c5d9e8;
	}
	.dateTime {
		/*display: -webkit-box;
		display: box;
		-webkit-box-orient: horizontal;*/
		width: 60%;
		text-align: left;
		color: ;
		
	}
	/*.dateTime>div, .dateTime>input {
		-webkit-box-flex: 1.0;
		box-flex: 1.0;
	}*/

	.timeName {
		width: 36px;
		display: inline-block;
		text-align: left;
	}
	.calTime {
		/*width:80%; */
		border: 1px solid black;
		display: inline-block;
		padding: 2px 5px;
	}
	.calTime>input{
		width: 20px;
		border: 0px;
	}
	.day {
		line-height: 20px;
	}
	.myCal-button div {
		background: #ccc;
		border: 1px solid #ccc;
		box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);
	}
	</style>
	<script>
		 
	</script>

</head>
<body>
	 <input type = "text" id = "myCalendar"/>
<!-- <div id = "calendar"></div>
	<div class = "myCalendar" style = "border: 1px solid black;">
		<div class = "calRow">
			<div class = "lastYear"><<</div>
			<div class = "nextYear">>></div>
			<div class = "lastMonth"><</div>
			<div class = "nextMonth">></div>
		</div>
		<div class = "calRow" style = "display: -webkit-box;">
			<div class = "" style = "-webkit-box-flex: 1.0;">1</div>
			<div class = "" style = "-webkit-box-flex: 1.0;">1</div>
			<div class = "" style = "-webkit-box-flex: 1.0;">1</div>
			<div class = "" style = "-webkit-box-flex: 1.0;">1</div>
			<div class = "" style = "-webkit-box-flex: 1.0;">1</div>
			<div class = "" style = "-webkit-box-flex: 1.0;">1</div>
			<div class = "" style = "-webkit-box-flex: 1.0;">1</div>
		</div>
		<div class = "calRow" style = "display: -webkit-box;">
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
		</div>
		<div class = "calRow" style = "display: -webkit-box;">
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
		</div>
		<div class = "calRow" style = "display: -webkit-box;">
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
		</div>
		<div class = "calRow" style = "display: -webkit-box;">
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
		</div>
		<div class = "calRow" style = "display: -webkit-box;">
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
		</div>
		<div class = "calRow" style = "display: -webkit-box;">
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
			<div class = "" style = "-webkit-box-flex: 1.0;"></div>
		</div>
		<div class = "dateTime">
			<div class = "timeName">时间</div>
			<div class = "calTime">
				<input type = "text" class = "myCal-hours" />:
				<input type = "text" class = "myCal-minutes" />:
				<input type = "text" class = "myCal-seconds" />
			</div>
		</div>
		<div class = "myCal-button">
			<div class = "myCal-confirm" style = "float: right;border: 1px solid black;">确定</div>
			<div class = "myCal-today" style = "float: right;border: 1px solid black;">今天</div>
			<div class = "myCal-clear" style = "float: right;border: 1px solid black;">清空</div>
			<div style = "clear: both;"></div>
		</div>
	</div> -->
	<script>
	var Calendar = {
		 	today: new Date(),
		 	year: new Date().getFullYear(),			//年
		 	month: new Date().getMonth(),			//月
		 	date: new Date().getDate(),				//日
		 	day: new Date().getDay(),				//星期
		 	hours: new Date().getHours(),			//时
		 	minutes: new Date().getMinutes(),		//分
		 	seconds: new Date().getSeconds(),		//秒
		 	_Y_year: new Date().getFullYear(),
		 	_M_month: new Date().getMonth() + 1,
		 	_D_day: null,
		 	// 润年
		 	isLeap: function () {
		 		var _year = this._Y_year;
		 		if(_year % 4 === 0 && _year % 100 > 0) {
		 			return true ;
		 		}
		 		if(_year % 400 === 0 && _year % 3200 > 0) {
		 			return true ;
		 		}
		 		return false ;
		 	},
		 	// 月的天数
		 	dayLen: function () {
		 		var _month = this.month + 1;
		 		if(_month === 2) {
		 			if(this.isLeap()) return 28;
		 			return 29;
		 		}
		 		if(_month < 8 && _month % 2 === 1) {
		 			return 31;
		 		}
		 		if(_month >= 8 && _month % 2 === 0) {
		 			return 31;
		 		}
		 		return 30 ;
		 	},
		 	// 隐藏日历
		 	hideCal: function () {
		 		var myFirstCal = document.getElementsByClassName("myFirstCal")[0];
		 		myFirstCal.style.display = "none";
		 	},
		 	// 清除
		 	myCalClear: function () {
		 		this.hideCal();
		 		return "";
		 	},
		 	// 获取日
		 	getDay: function (e) {
		 		var _this = this;
		 		var value;
		 		var day = document.getElementsByClassName("day");
		 		var value ;
		 	// 	for(var i = 0; i < day.length; i++) {
				// 	day[i].onclick = function () {
				// 		// 过滤星期
				// 		if(0 < this.innerHTML < 32) {
				// 			value = this.innerHTML;
				// 		}else{
				// 			value = _this.date;
				// 		}
				// 	}
				// }
				if(0 < (+e.innerHTML) < 32) {
					value = e.innerHTML;
				}else{
					value = _this.date;
				}
				_this._D_day = value;
		 		// return value;
		 	},
		 	zero: function (target) {
		 		// target = "78";
		 		if((target+ "").indexOf("0") !== 0) {
		 			target = +target < 10 ? "0" + target : target;
		 		}
		 		if(+target >= 60){
		 			return "00";
		 		}
		 		if(/[a-zA-Z\s]+/.test(+target)) {
		 			return "00";
		 		}
		 		return target;
		 	},
		 	// 确定
		 	myCalConfirm: function (e) {
		 		var hours = this.zero(document.getElementsByClassName("myCal-hours")[0].value || document.getElementsByClassName("myCal-hours")[0].placeholder);
		 		var minutes = this.zero(document.getElementsByClassName("myCal-minutes")[0].value || document.getElementsByClassName("myCal-minutes")[0].placeholder);
		 		var seconds = this.zero(document.getElementsByClassName("myCal-seconds")[0].value || document.getElementsByClassName("myCal-seconds")[0].placeholder);
		 		var year = document.getElementsByClassName("year")[0].innerHTML.match(/^\d+/)[0];
		 		var month = this.zero(document.getElementsByClassName("month")[0].innerHTML.match(/^\d+/));
		 		var day = this.zero(this._D_day || this.date);
		 		var totalTime = year + "-" + month + "-" + day + " " + hours + ":" + minutes + ":" + seconds;
		 		this.hideCal();
		 		return totalTime;
		 	},
		 	// 今天 
		 	myCalToday: function () {
		 		var hours = this.zero(document.getElementsByClassName("myCal-hours")[0].placeholder);
		 		var minutes = this.zero(document.getElementsByClassName("myCal-minutes")[0].placeholder);
		 		var seconds = this.zero(document.getElementsByClassName("myCal-seconds")[0].placeholder);
		 		var year = this.year;
		 		var month = this.month+1;
		 		var day = this.date;
		 		var today = year + "-" + month + "-" + day + " " + hours + ":" + minutes + ":" + seconds;
		 		this.hideCal();
		 		return today;
		 	},
		 	// 头部
		 	header: function () {
		 		var str = "";
		 		str += '<div class = "calRow"><div class = "lastYear">\<\<</div><div class = "lastMonth">\<</div><div class = "year">'+this._Y_year+'年</div><div class = "month">'+this._M_month+'月</div><div class = "nextMonth">\></div><div class = "nextYear">\>\></div></div>';
		 		return str;
		 	},
		 	// 时分秒
		 	dateTime: function () {
		 		var str = "";
		 		str += '<div class = "dateTime"><div class = "timeName " >时间</div><div class = "calTime"><input type = "text" class = "myCal-hours" placeholder = '+ this.zero(this.hours)+' />:<input type = "text" class = "myCal-minutes" placeholder = '+this.zero(this.minutes)+' />:<input type = "text" class = "myCal-seconds" placeholder ='+ this.zero(this.seconds)+' /></div></div>';
		 		return str;
		 	},
		 	// 确定
		 	confirm: function () {
		 		var str = "";
		 		str += '<div class = "myCal-button"><div class = "myCal-confirm" style = "float: right;">确定</div><div class = "myCal-today" style = "float: right;">今天</div><div class = "myCal-clear" style = "float: right;">清空</div><div style = "clear: both;"></div></div>';
		 		return str;
		 	},
		 	// 初始化时分秒
		 	initDateTime: function () {
				document.getElementsByClassName("myCal-hours")[0].value = this.zero(this.hours);
				document.getElementsByClassName("myCal-minutes")[0].value = this.zero(this.minutes);
				document.getElementsByClassName("myCal-seconds")[0].value = this.zero("1" || this.seconds);
		 	},
		 	//  加载日历
		 	getCalendar: function () {
		 		var len =  this.dayLen();
		 		var d = (new Date(this._Y_year,this._M_month-1,1)).getDay();       //今月的第一天是星期几
		 		var arr = [];
		 		var start = 0;
		 		var str;
		 		for(var i = 0; i < 7; i++) {
		 			arr[i] = [];
		 			for(var j = 0; j < 7; j++) {
		 				if(i == 0) {
		 					arr[i][j] = "日一二三四五六".charAt(j);
		 				}else{
		 					start ++ ;
			 				var fill = start - d;
			 				if(fill > 0 && fill < len + 1) {
			 					arr[i][j] = fill;
			 				}else{
			 					arr[i][j] = "&nbsp;";
			 				}
		 				}
		 			}
		 		}
		 		console.log(arr);
		 		str = '<div class = "myCalendar" style = "width: auto;">';
		 		// str += this.header();
		 		arr.forEach(function (value, index, arr) {
		 			str += '<div class = "calRow">' + '<div class = "day">';
		 			if(value[0] == "&nbsp;" && index == 6) {
		 				str += '</div></div>';
		 			}else{
		 				str += value.join('</div><div class = "day">');
		 				str += '</div></div>';
		 			}
		 		});
		 		str += "</div>";
		 		return str;
		 	},
		 	lastYear: function () {
				this._Y_year--; 		
		 	},
		 	nextYear: function () {
		 		this._Y_year++;
		 	},
		 	lastMonth: function () {
				if(this._M_month == 1) {this._Y_year--;this._M_month = 12;}
				else{this._M_month--;};
		 	},
		 	nextMonth: function () {
		 		if(this._M_month == 12) {this._Y_year++;this._M_month = 1;}
		 		else{this._M_month++;};
		 	},
		 	hasInit: function () {
		 		var myFirstCal = document.getElementsByClassName("myFirstCal");
		 		if(myFirstCal.length) {
		 			return true;
		 		}
		 	},
		 	init: function (e) {
		 		var _this = this;
		 		var myFirstCal = document.getElementsByClassName("myFirstCal")[0];
		 		if(myFirstCal) {
		 			return ;
		 		}
		 		var oDiv = document.createElement("div");
				oDiv.className = "myFirstCal";
				oDiv.innerHTML = Calendar.header() + Calendar.getCalendar() + Calendar.dateTime() + Calendar.confirm();
				document.body.appendChild(oDiv);

				var myCalendar = document.getElementsByClassName("myCalendar")[0];
				var year = document.getElementsByClassName("year")[0];
				var month = document.getElementsByClassName("month")[0];
				var myFirstCal = document.getElementsByClassName("myFirstCal")[0];
				var lastYear = document.getElementsByClassName("lastYear")[0];
				var nextYear = document.getElementsByClassName("nextYear")[0];
				var lastMonth = document.getElementsByClassName("lastMonth")[0];
				var nextMonth = document.getElementsByClassName("nextMonth")[0];
				var clear = document.getElementsByClassName("myCal-clear")[0];
				var today = document.getElementsByClassName("myCal-today")[0];
				var confirm = document.getElementsByClassName("myCal-confirm")[0];

				lastYear.onclick = function () {
					Calendar.lastYear();
					year.innerHTML = Calendar._Y_year + "年";
					month.innerHTML = Calendar._M_month + "月";
					myCalendar.innerHTML = Calendar.getCalendar();
				}
				nextYear.onclick = function () {
					Calendar.nextYear();
					year.innerHTML = Calendar._Y_year + "年";
					month.innerHTML = Calendar._M_month + "月";
					myCalendar.innerHTML = Calendar.getCalendar();
				}
				lastMonth.onclick = function () {
					Calendar.lastMonth();
					year.innerHTML = Calendar._Y_year + "年";
					month.innerHTML = Calendar._M_month + "月";
					myCalendar.innerHTML = Calendar.getCalendar();
				}
				nextMonth.onclick = function () {
					Calendar.nextMonth();
					year.innerHTML = Calendar._Y_year + "年";
					month.innerHTML = Calendar._M_month + "月";
					myCalendar.innerHTML = Calendar.getCalendar();
				}
				clear.onclick = function () {
					e.value = _this.myCalClear();
				}
				today.onclick = function () {
					e.value = _this.myCalToday();
				}
				confirm.onclick = function () {
					e.value = _this.myCalConfirm(e);
				}
				// _this.getDay();
				var day = document.getElementsByClassName("day");
		 		for(var i = 0; i < day.length; i++) {
					day[i].onclick = function () {
						_this.getDay(this);
					}
				}
				// _this.initDateTime();
		 	},
		}
		var oInput = document.getElementById("myCalendar");
			oInput.onclick = function () {
				if(Calendar.hasInit()) {
					var myFirstCal = document.getElementsByClassName("myFirstCal")[0];
					myFirstCal.style.display = "block";
				}else{
					Calendar.init(this);	
				}
		}
	</script>

	<script>
	
	</script>
</body>
 
</html>