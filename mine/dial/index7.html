<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>test</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=3, minimum-scale=1.0,user-scalable=no,minimal-ui">
<style>
	body{margin:0 auto;padding:0 auto;overflow: hidden;}
	.tab-ctrl {position: absolute;width: 576px;height: 576px;  bottom: -291px;  border-radius: 50%;border:2px solid #414141;left: 120px;  top: 220px;}
	.tab-ctrl:before {content: ''; background: #ffdf42; width: 364px; height: 364px; position: absolute; left: 50%; margin-left: -182px; bottom: 110px; border-radius: 50%;}
	.tab-ctrl .block, .tab-ctrl .img-ma-txt{width:164px;height:164px;position:absolute;}
	.tab-ctrl .c,.tab-ctrl .img-ma,.tab-ctrl .img-cur{width:100%;height:100%;}
	.tab-ctrl .img-ma{position: absolute;left:0;top:0;}
	.tab-ctrl .img-cur{display: none;}
	.tab-ctrl .cur .img-cur{display: block;  position: absolute;}
	.tab-ctrl .img-ma-txt{color:#fff;font-size: 18px;line-height: 30px;text-align: center;position: absolute;}
	.tab-ctrl .c-icon1{background: url(img/10.png) no-repeat;width:26px;height:18px;margin:32px auto 0;}
	.tab-ctrl .c-icon2{background: url(img/11.png) no-repeat;width:18px;height:20px;margin:12px auto 0;}
	</style>
	<script type="text/javascript">
	if(/Android (\d+\.\d+)/.test(navigator.userAgent)){
	    var version = parseFloat(RegExp.$1);
	    if(version>2.3){
	        var phoneScale = parseInt(window.screen.width)/640;
	        document.write('<meta name="viewport" content="width=640, minimum-scale = '+ phoneScale +', maximum-scale = '+ phoneScale +', target-densitydpi=device-dpi">');
	    }else{
	        document.write('<meta name="viewport" content="width=640, target-densitydpi=device-dpi">');
	    }
	}else{
	    document.write('<meta name="viewport" content="width=640, user-scalable=no, target-densitydpi=device-dpi,minimal-ui">');
	}
	</script>
</head>
<body>
<div class="doc">
	<div class="tab-ctrl" style="position:absolute;" id="Jtab_ctrl">
        <div class="block block0 cur">
            <div class="c">
                <div class="img-ma">
                    <img src="img/12_1.png" class="swiper-lazy" alt="">
                </div>
                <div class="img-cur">
                    <img src="img/12.png" class="swiper-lazy" alt="">
                </div>
            </div>
        </div>
        <div class="block block1">
            <div class="c">
                <div class="img-ma">
                    <img src="img/12_1.png" class="swiper-lazy" alt="">
                </div>
                <div class="img-cur">
                    <img src="img/12.png" class="swiper-lazy" alt="">
                </div>
            </div>
        </div>
        <div class="block block2">
            <div class="c">
                <div class="img-ma">
                    <img src="img/12_1.png" class="swiper-lazy" alt="">
                </div>
                <div class="img-cur">
                    <img src="img/12.png" class="swiper-lazy" alt="">
                </div>
            </div>
        </div>
        <div class="block block3">
            <div class="c">
                <div class="img-ma">
                    <img src="img/12_1.png" class="swiper-lazy" alt="">
                </div>
                <div class="img-cur">
                    <img src="img/12.png" class="swiper-lazy" alt="">
                </div>
            </div>
        </div>
        <div class="block block4">
            <div class="c">
                <div class="img-ma">
                    <img src="img/12_1.png" class="swiper-lazy" alt="">
                </div>
                <div class="img-cur">
                    <img src="img/12.png" class="swiper-lazy" alt="">
                </div>
            </div>
        </div>
        <div class="block block5">
            <div class="c">
                <div class="img-ma">
                    <img src="img/12_1.png" class="swiper-lazy" alt="">
                </div>
                <div class="img-cur">
                    <img src="img/12.png" class="swiper-lazy" alt="">
                </div>
            </div>
        </div>
        <div class="block block6">
            <div class="c">
                <div class="img-ma">
                    <img src="img/12_1.png" class="swiper-lazy" alt="">
                </div>
                <div class="img-cur">
                    <img src="img/12.png" class="swiper-lazy" alt="">
                </div>
            </div>
        </div>
        <div class="block block7">
            <div class="c">
                <div class="img-ma">
                    <img src="img/12_1.png" class="swiper-lazy" alt="">
                </div>
                <div class="img-cur">
                    <img src="img/12.png" class="swiper-lazy" alt="">
                </div>
            </div>
        </div>
    </div>
</div>


<!-- =================== 转盘控件Dial =================== -->
<script src="js/dial7.js"></script>
<script>
var width = document.documentElement.clientWidth,
		height = document.documentElement.clientHeight,
		oDoc = document.getElementsByClassName("doc")[0];
	oDoc.style.width = width + "px";	
	oDoc.style.height = height +"px";
</script>
<script>
	// 转盘
    var tar = document.getElementById('Jtab_ctrl'),
        clickTarget = tar.getElementsByClassName('block'),
        myDial = new Dial('#Jtab_ctrl',{
        blockNumber: 8,                                 //旋转分块,缺省值为8。
        blockNumberIndex: true,                         //是否按照分块的下标,缺省值为true
        origin:"50% 50%",                               //旋转中心,缺省值为"50% 50%"。
        transition: "-webkit-transform .3s ease-in",    //动画。
        isReverse: false,                               //是否为逆时针方向计算图片置顶的次序,缺省值为false顺时针
        click: true,                                    //点击(图片,节点)是否转动,缺省值为false
        clickTarget: clickTarget,                       //点击的目标(图片,节点)。
        clickClass: ".block",
        isLock: false,                                  //是否锁屏。
        radius: 291,                                    //每个按钮到圆中心的距离，一般取半径长。
        onDraw: function () {
            var index = this.curIndex,
                angle = this.angle,
                clickBlock = this.clickBlock,
                length = clickBlock.length,
                img;
            for(var i = 0, l = length; i < l; i++) {
                imgcur = clickBlock[i].querySelector('.img-cur');
                imgma = clickBlock[i].querySelector('.img-ma');
                if(imgcur) {
                    imgcur.style.transform = 'rotate(' + -angle + 'deg)';
                    imgcur.style.webkitTransform = 'rotate(' + -angle + 'deg)';
                }
                if(imgma) {
                    imgma.style.transform = 'rotate(' + -angle + 'deg)';
                    imgma.style.webkitTransform = 'rotate(' + -angle + 'deg)';
                }
                clickBlock[i].classList.remove('cur');
            }
            // clickBlock[index].classList.add('cur');
            
            // transformProp = window.getComputedStyle(clickTarget[index], null)['transform'];
            // 调整当前元素的角度 
            // var rtransfromxy = /(-?\d\d*(?:\.\d\d*(?:e-)?\d*)?)/g,
            //     ret = transformProp.match(rtransfromxy),
            //     tx = ret[4], ty = ret[5];
            // var transformStr = "translate(",
            //     webkitStr = "-webkit-";
            // if(tx) {
            //     if(tx.indexOf("-") > 1) {
            //         tx = 0;
            //     }else{
            //         tx = +tx;
            //     }
            //     transformStr += tx + "px";
            // }
            // transformStr += ", ";
            // if(ty) {
            //     if(ty.indexOf("-") > 1) {
            //         ty = 0;
            //     }else{
            //         ty = +ty;
            //     }
            //     transformStr += ty + "px";
            // }
            // transformStr += ")";
            
            // clickTarget[index].style.transform = transformStr + ' ' + 'rotate(' + (-angle) + 'deg)';
            // clickTarget[index].style.webkitTransform = webkitStr + transformStr + ' ' + webkitStr + 'rotate(' + (-angle) + 'deg)';
        }
    });
</script>
</body>
</html>